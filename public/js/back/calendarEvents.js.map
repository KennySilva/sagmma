{"version":3,"sources":["calendarEvents.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"calendarEvents.js","sourcesContent":["\r\n$(function () {\r\n    /* initialize the external events\r\n    -----------------------------------------------------------------*/\r\n    function ini_events(ele) {\r\n        ele.each(function () {\r\n            // create an Event Object (http://arshaw.com/fullcalendar/docs/event_data/Event_Object/)\r\n            // it doesn't need to have a start or end\r\n            var eventObject = {\r\n                title: $.trim($(this).text()) // use the element's text as the event title\r\n            };\r\n\r\n            // store the Event Object in the DOM element so we can get to it later\r\n            $(this).data('eventObject', eventObject);\r\n\r\n            // make the event draggable using jQuery UI\r\n            $(this).draggable({\r\n                zIndex: 1070,\r\n                revert: true, // will cause the event to go back to its\r\n                revertDuration: 0  //  original position after the drag\r\n            });\r\n\r\n        });\r\n    }\r\n\r\n    ini_events($('#external-events div.external-event'));\r\n\r\n    /* initialize the calendar\r\n    -----------------------------------------------------------------*/\r\n    //Date for the calendar events (dummy data)\r\n    var date = new Date();\r\n    var d = date.getDate(),\r\n    m = date.getMonth(),\r\n    y = date.getFullYear();\r\n    //while(reload==false){\r\n    $('#calendar').fullCalendar({\r\n        locale: 'pt',\r\n        height: 450,\r\n        // contentHeight: 250,\r\n        aspectRatio: 0,\r\n        header: {\r\n            left: 'prev,next today',\r\n            center: 'title',\r\n            right: 'month,agendaWeek,agendaDay'\r\n        },\r\n        buttonText: {\r\n            today: 'Hoje',\r\n            month: 'Mês',\r\n            week: 'Semana',\r\n            day: 'Dia'\r\n        },\r\n        events: { url:\"showEvents\"},\r\n\r\n        editable: true,\r\n        droppable: true,\r\n\r\n        drop: function (date, allDay) {\r\n            var originalEventObject = $(this).data('eventObject');\r\n            var copiedEventObject = $.extend({}, originalEventObject);\r\n            allDay=true;\r\n            copiedEventObject.start = date;\r\n            copiedEventObject.allDay = allDay;\r\n            copiedEventObject.backgroundColor = $(this).css(\"background-color\");\r\n            copiedEventObject.borderColor = $(this).css(\"border-color\");\r\n\r\n            if ($('#drop-remove').is(':checked')) {\r\n                $(this).remove();\r\n            }\r\n            var title=copiedEventObject.title;\r\n            var start=copiedEventObject.start.format(\"YYYY-MM-DD HH:mm\");\r\n            var back=copiedEventObject.backgroundColor;\r\n\r\n            crsfToken = document.getElementsByName(\"_token\")[0].value;\r\n            $.ajax({\r\n                url: 'saveEvents',\r\n                data: 'title='+ title+'&start='+ start+'&allday='+allDay+'&background='+back,\r\n                type: \"POST\",\r\n                headers: {\r\n                    \"X-CSRF-TOKEN\": crsfToken\r\n                },\r\n                success: function(events) {\r\n                    console.log('Evento creado');\r\n                    $('#calendar').fullCalendar('refetchEvents' );\r\n                },\r\n                error: function(json){\r\n                    console.log(\"Error al crear evento\");\r\n                }\r\n            });\r\n        },\r\n\r\n        eventResize: function(event) {\r\n            var start = event.start.format(\"YYYY-MM-DD HH:mm\");\r\n            var back=event.backgroundColor;\r\n            var allDay=event.allDay;\r\n            if(event.end){\r\n                var end = event.end.format(\"YYYY-MM-DD HH:mm\");\r\n            }else{var end=\"NULL\";\r\n        }\r\n        crsfToken = document.getElementsByName(\"_token\")[0].value;\r\n        $.ajax({\r\n            url: 'updateEvents',\r\n            data: 'title='+ event.title+'&start='+ start +'&end='+ end +'&id='+ event.id+'&background='+back+'&allday='+allDay,\r\n            type: \"POST\",\r\n            headers: {\r\n                \"X-CSRF-TOKEN\": crsfToken\r\n            },\r\n            success: function(json) {\r\n                console.log(\"Updated Successfully\");\r\n            },\r\n            error: function(json){\r\n                console.log(\"Error al actualizar evento\");\r\n            }\r\n        });\r\n    },\r\n\r\n    eventMouseover: function( event, jsEvent, view ) {\r\n        var start = (event.start.format(\"HH:mm\"));\r\n        var back=event.backgroundColor;\r\n        if(event.end){\r\n            var end = event.end.format(\"HH:mm\");\r\n        }else{var end=\"Indeterminado\";\r\n    }\r\n    if(event.allDay){\r\n        var allDay = \"Sim\";\r\n    }else{var allDay=\"Não\";\r\n}\r\nvar tooltip = '<div class=\"tooltipevent\" style=\"width:200px;height:100px;color:white;background:'+back+';position:absolute;z-index:10001;\">'+'<center>'+ event.title +'</center>'+'Durante o dia: '+allDay+'<br>'+ 'Início: '+start+'<br>'+ 'Fim: '+ end +'</div>';\r\n$(\"body\").append(tooltip);\r\n$(this).mouseover(function(e) {\r\n    $(this).css('z-index', 10000);\r\n    $('.tooltipevent').fadeIn('500');\r\n    $('.tooltipevent').fadeTo('10', 1.9);\r\n}).mousemove(function(e) {\r\n    $('.tooltipevent').css('top', e.pageY + 10);\r\n    $('.tooltipevent').css('left', e.pageX + 20);\r\n});\r\n},\r\n\r\neventMouseout: function(calEvent, jsEvent) {\r\n    $(this).css('z-index', 8);\r\n    $('.tooltipevent').remove();\r\n},\r\n\r\neventDrop: function(event, delta) {\r\n    var start = event.start.format(\"YYYY-MM-DD HH:mm\");\r\n    if(event.end){\r\n        var end = event.end.format(\"YYYY-MM-DD HH:mm\");\r\n    }else{var end=\"NULL\";\r\n}\r\nvar back=event.backgroundColor;\r\nvar allDay=event.allDay;\r\ncrsfToken = document.getElementsByName(\"_token\")[0].value;\r\n\r\n$.ajax({\r\n    url: 'updateEvents',\r\n    data: 'title='+ event.title+'&start='+ start +'&end='+ end+'&id='+ event.id+'&background='+back+'&allday='+allDay ,\r\n    type: \"POST\",\r\n    headers: {\r\n        \"X-CSRF-TOKEN\": crsfToken\r\n    },\r\n    success: function(json) {\r\n        console.log(\"Updated Successfully eventdrop\");\r\n    },\r\n    error: function(json){\r\n        console.log(\"Error al actualizar eventdrop\");\r\n    }\r\n});\r\n},\r\n\r\ndayClick: function(date, jsEvent, view) {\r\n    if (view.name === \"month\") {\r\n        $('#calendar').fullCalendar('gotoDate', date);\r\n        $('#calendar').fullCalendar('changeView', 'agendaDay');\r\n    }\r\n},\r\n\r\neventClick: function (event, jsEvent, view) {\r\n    crsfToken = document.getElementsByName(\"_token\")[0].value;\r\n    var con=confirm(\"Realmente queres eliminar esta Tarefa?\");\r\n    if(con){\r\n        $.ajax({\r\n            url: 'deleteEvents',\r\n            data: 'id=' + event.id,\r\n            headers: {\r\n                \"X-CSRF-TOKEN\": crsfToken\r\n            },\r\n            type: \"POST\",\r\n            success: function () {\r\n                $('#calendar').fullCalendar('removeEvents', event._id);\r\n                console.log(\"Evento eliminado\");\r\n            }\r\n        });\r\n    }else{\r\n        console.log(\"Cancelado\");\r\n    }\r\n},\r\n\r\n});\r\n\r\n/* AGREGANDO EVENTOS AL PANEL */\r\nvar currColor = \"#3c8dbc\"; //Red by default\r\n//Color chooser button\r\nvar colorChooser = $(\"#color-chooser-btn\");\r\n$(\"#color-chooser > li > a\").click(function (e) {\r\n    e.preventDefault();\r\n    //Save color\r\n    currColor = $(this).css(\"color\");\r\n    //Add color effect to button\r\n    $('#add-new-event').css({\"background-color\": currColor, \"border-color\": currColor});\r\n});\r\n$(\"#add-new-event\").click(function (e) {\r\n    e.preventDefault();\r\n    //Get value and make sure it is not null\r\n    var val = $(\"#new-event\").val();\r\n    if (val.length == 0) {\r\n        return;\r\n    }\r\n\r\n    //Create events\r\n    var event = $(\"<div />\");\r\n    event.css({\"background-color\": currColor, \"border-color\": currColor, \"color\": \"#fff\"}).addClass(\"external-event\");\r\n    event.html(val);\r\n    $('#external-events').prepend(event);\r\n\r\n    //Add draggable funtionality\r\n    ini_events(event);\r\n\r\n    //Remove event from text input\r\n    $(\"#new-event\").val(\"\");\r\n});\r\n});\r\n"]}